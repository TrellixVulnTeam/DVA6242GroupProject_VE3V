<!DOCTYPE html>
<html>
<head>
  <title>Simple Map</title>
  <meta name="viewport" content="initial-scale=1.0">
  <meta charset="utf-8">
  <script src="test1.js"></script>
  <style>
    /* Always set the map height explicitly to define the size of the div
     * element that contains the map. */
    #map {
      height: 80%;
      width: 50%;
      margin-top:100px;
      margin-right:10px;
    }
    /* Optional: Makes the sample page fill the window. */
    html, body {
      height: 100%;
      width: : 100%;
      padding: 0;
    }

    #markers_info .marker {
      height: 40px;
      width: 50px;
      margin-left:1000px;
      margin-right:10px;
      cursor: pointer;*/*/
    }

  </style>
</head>
<body>

<div id="map">
    <script>
      var styles = {
        default: null,
        hide: [
          // {
          //   featureType: 'poi.business',
          //   stylers: [{visibility: 'off'}]
          // },
          {
            featureType: 'poi',
            stylers: [{visibility: 'off'}]
          },
          {
            featureType: 'transit',
            elementType: 'labels.icon',
            stylers: [{visibility: 'off'}]
          }
        ]
      };
      var labels = 'ABCDEFGHIJKLMNOPQRSTUVWXYZ';
      var labelIndex = 0;
      var work = {lat: 40.723042, lng: -73.999180};

      var markers = [];
      var infowindows = [];

      var apt1 = {lat: 40.688453, lng: -73.986503};

      var restaurants = [];
      for (i = 0; i < yelp.length; i++) { 
          var lat = yelp[i]['coordinates']['latitude'];
          var lng = yelp[i]['coordinates']['longitude'];
          var rest = {};
          rest['lat'] = lat;
          rest['lng'] = lng;
          restaurants.push(rest);
      }
      console.log(restaurants);

      var strings=[];
      for(i=0; i<20 ;i++){
        strings.push('a');
      }
      console.log(strings)

      var map;
      function initMap() {
        map = new google.maps.Map(document.getElementById('map'), {
          center: apt1,
          zoom: 15
        });

        map.setOptions({styles: styles['hide']});


        var marker = new google.maps.Marker({
          position: apt1,
          map: map,
          title: 'apartment',
          icon: 'marker_house_pink.png'
        });

        for (i = 0; i < restaurants.length; i++) { 
          addMarker(restaurants[i], map, strings[i])
           
        }

      }

      function normalIcon() {
        return 'marker_restaurant.png'
      }

      function highlightedIcon() {
        return 'marker_restaurant_large.png'
      }

      function normalOpacity() {
        return 0.6
      }

      function highlightedOpacity() {
        return 1
      }



      function addMarker(location, map, string) {
 
       if(infowindow)
       infowindow.close();
       var infowindow = new google.maps.InfoWindow({content: string});


        

        var marker = new google.maps.Marker({
          position: location,
          // label: labels[labelIndex++ % labels.length],
          map: map,
          icon: normalIcon(),  
          opacity: normalOpacity()      
        });

 
        google.maps.event.addListener(map, "click", function(event) {
            infowindow.close();
            marker.setIcon(normalIcon());
            marker.setOpacity(normalOpacity());
        });

        marker.addListener('click', function () {
            console.log('1')
            for (var j = 0; j < markers.length; j++) {
              markers[j].setIcon(normalIcon());
              marker.setOpacity(normalOpacity());
              infowindows[j].close(map, markers[j])
            }
            marker.setIcon(highlightedIcon());
            marker.setOpacity(highlightedOpacity());
            infowindow.open(map, marker);
        })

        infowindows.push(infowindow)
        markers.push(marker);
      }
    </script>
</div>

<div id='markers_info'>
  <script>

     function myfunction() {
        console.log('image clicked')
     }
     function highlightedList() {
        document.getElementById('img1').style.height = "400px";
     }
     function normalList() {

     }

  </script>

</div>


<script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyAwrdvLk2XruYEsLwqpYwiqnaKbSwhHiiM&callback=initMap"
    async defer></script>
  </body>
</html>
